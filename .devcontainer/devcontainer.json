{
    "name": "Discord Bot Dev Container",
    "image": "mcr.microsoft.com/devcontainers/base:debian",
    "remoteUser": "vscode",
    "runArgs": [
        "--network=host"
    ],
    "mounts": [
        "source=${localEnv:HOME}/.ssh,target=/home/vscode/.ssh,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.docker,target=/home/vscode/.docker-host,type=bind,consistency=cached,readonly"
    ],
    "remoteEnv": {
        "DOCKER_CONFIG": "/home/vscode/.docker"
    },
    "features": {
        "ghcr.io/devcontainers/features/common-utils:2": {
            "configureZshAsDefaultShell": "true"
        },
        "ghcr.io/devcontainers-extra/features/zsh-plugins:0": {
            "plugins": "zsh-syntax-highlighting zsh-autosuggestions",
            "omzPlugins": "https://github.com/zsh-users/zsh-syntax-highlighting.git https://github.com/zsh-users/zsh-autosuggestions",
            "username": "vscode"
        },
        "ghcr.io/devcontainers-extra/features/shfmt:1": {},
        "ghcr.io/devcontainers/features/python:1": {
            "version": "3.13",
            "installTools": "true",
            "toolsToInstall": "ruff,mypy"
        },
        "ghcr.io/devcontainers/features/docker-in-docker:2": {
            "moby": "false"
        }
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "mikestead.dotenv",
                "charliermarsh.ruff",
                "foxundermoon.shell-format",
                "mkhl.shfmt",
                "tamasfe.even-better-toml",
                "EditorConfig.EditorConfig"
            ],
            "settings": {
                "editor.formatOnSave": true,
                "editor.insertSpaces": true,
                "editor.detectIndentation": true,
                "shellformat.path": "/usr/local/bin/shfmt",
                "github.copilot.chat.commitMessageGeneration.instructions": [
                    {
                        "file": ".github/commit-instructions.md"
                    }
                ],
                "[python]": {
                    "editor.codeActionsOnSave": {
                        "source.fixAll": "explicit",
                        "source.organizeImports": "explicit"
                    },
                    "editor.defaultFormatter": "charliermarsh.ruff"
                }
            }
        }
    },
    "postCreateCommand": "./.devcontainer/post-create.sh"
}
